# Runner626 åœ°å›¾ç”Ÿæˆå™¨

> ä»åç¼–è¯‘çš„Java MEæ¸¸æˆä»£ç å¤åŸåœ°å›¾ç”Ÿæˆç³»ç»Ÿï¼Œå¹¶ç”Ÿæˆå¯è§†åŒ–å›¾ç‰‡

## ğŸ® é¡¹ç›®ç®€ä»‹

è¿™ä¸ªé¡¹ç›®åˆ†æäº†Runner626ï¼ˆä¸€æ¬¾Java MEæ‰‹æœºæ¸¸æˆï¼‰çš„åœ°å›¾ç”Ÿæˆé€»è¾‘ï¼Œå¹¶ä½¿ç”¨Pythonå®Œå…¨å¤åŸäº†å…¶åœ°å›¾ç³»ç»Ÿã€‚é€šè¿‡è§£æäºŒè¿›åˆ¶åœ°å½¢æ–‡ä»¶ï¼ˆ.binï¼‰ï¼Œç”Ÿæˆäº†æ‰€æœ‰å…³å¡çš„å¯è§†åŒ–åœ°å›¾å›¾ç‰‡ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
runner626/
â”œâ”€â”€ resources/                  # æ¸¸æˆèµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ stage0.bin             # å…³å¡0-2çš„åœ°å½¢æ•°æ®
â”‚   â”œâ”€â”€ stage1.bin             # å…³å¡3-5çš„åœ°å½¢æ•°æ®
â”‚   â”œâ”€â”€ stage2.bin             # å…³å¡6-8çš„åœ°å½¢æ•°æ®
â”‚   â”œâ”€â”€ stage3.bin             # å…³å¡9-11çš„åœ°å½¢æ•°æ®
â”‚   â””â”€â”€ stage4.bin             # å…³å¡12-15çš„åœ°å½¢æ•°æ®
â”œâ”€â”€ sources/defpackage/         # åç¼–è¯‘çš„Javaæºä»£ç 
â”‚   â”œâ”€â”€ c.java                 # åœ°å›¾ç®¡ç†æ ¸å¿ƒç±»
â”‚   â”œâ”€â”€ a.java                 # æ¸¸æˆä¸»ç±»
â”‚   â””â”€â”€ ...                    # å…¶ä»–ç±»
â”œâ”€â”€ map_generator.py            # åœ°å›¾ç”Ÿæˆå™¨è„šæœ¬ â­
â”œâ”€â”€ analyze_stage_bin.py        # binæ–‡ä»¶åˆ†æå·¥å…·
â”œâ”€â”€ map_output/                 # ç”Ÿæˆçš„åœ°å›¾å›¾ç‰‡ ğŸ“¦
â”‚   â”œâ”€â”€ index.html             # WebæŸ¥çœ‹å™¨
â”‚   â”œâ”€â”€ stage0_chunks/         # Stage 0çš„å—å›¾ç‰‡
â”‚   â”œâ”€â”€ stage0_levels/         # Stage 0çš„å…³å¡å›¾ç‰‡
â”‚   â””â”€â”€ ...                    # å…¶ä»–stage
â”œâ”€â”€ CORE_GAMEPLAY.md            # æ¸¸æˆæœºåˆ¶æ–‡æ¡£
â””â”€â”€ MAP_GENERATION_REPORT.md    # è¯¦ç»†æŠ€æœ¯æŠ¥å‘Š ğŸ“š
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

```bash
# Python 3.7+
# éœ€è¦å®‰è£…çš„åŒ…
pip install pillow numpy
```

### è¿è¡Œåœ°å›¾ç”Ÿæˆå™¨

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd d:\pyworkspace\runner626

# è¿è¡Œç”Ÿæˆå™¨
python map_generator.py
```

ç”Ÿæˆå™¨ä¼šï¼š
1. è¯»å–æ‰€æœ‰5ä¸ªstage.binæ–‡ä»¶
2. è§£æåœ°å½¢å—ã€æ•Œäººã€éšœç¢ç‰©ã€æ”¶é›†å“æ•°æ®
3. ç”Ÿæˆ30ä¸ªç‹¬ç«‹çš„åœ°å½¢å—å›¾ç‰‡
4. ç”Ÿæˆ15ä¸ªå®Œæ•´çš„å…³å¡åœ°å›¾
5. ç”Ÿæˆ5ä¸ªtileç±»å‹å›¾ä¾‹
6. åˆ›å»ºäº¤äº’å¼HTMLæŸ¥çœ‹å™¨

### æŸ¥çœ‹ç”Ÿæˆçš„åœ°å›¾

```bash
# æ–¹æ³•1: å‘½ä»¤è¡Œæ‰“å¼€
cd map_output
Start-Process index.html

# æ–¹æ³•2: ç›´æ¥åŒå‡»
# åŒå‡» map_output/index.html
```

## ğŸ“Š ç”Ÿæˆå†…å®¹

### åœ°å½¢å—ï¼ˆChunksï¼‰
- æ¯ä¸ªStageåŒ…å«6ä¸ªå—
- æ¯ä¸ªå—å°ºå¯¸: 100Ã—30 tiles = 800Ã—240 åƒç´ 
- åŒ…å«åœ°å½¢ã€æ•Œäººã€éšœç¢ç‰©å’Œæ”¶é›†å“

### å®Œæ•´å…³å¡ï¼ˆLevelsï¼‰
- é€šè¿‡å—åºåˆ—æ‹¼æ¥ç”Ÿæˆ
- 15ä¸ªä¸åŒçš„å…³å¡
- å®½åº¦: 4800-6400 åƒç´ 
- é«˜åº¦: 240 åƒç´ 

### è¾“å‡ºç›®å½•ç»“æ„
```
map_output/
â”œâ”€â”€ stage0_chunks/
â”‚   â”œâ”€â”€ chunk_0.png
â”‚   â”œâ”€â”€ chunk_1.png
â”‚   â”œâ”€â”€ ...
â”‚   â”œâ”€â”€ chunk_5.png
â”‚   â””â”€â”€ tile_legend.png
â”œâ”€â”€ stage0_levels/
â”‚   â”œâ”€â”€ level_0_map.png
â”‚   â”œâ”€â”€ level_1_map.png
â”‚   â””â”€â”€ level_2_map.png
â”œâ”€â”€ stage1_chunks/
â”œâ”€â”€ stage1_levels/
â”œâ”€â”€ ... (stage 2-4)
â””â”€â”€ index.html
```

## ğŸ¨ é¢œè‰²è¯´æ˜

åœ°å›¾ä½¿ç”¨é¢œè‰²åŒºåˆ†ä¸åŒçš„åœ°å½¢ç±»å‹ï¼š

| é¢œè‰² | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| ğŸŸ¤ æ£•è‰² | æ™®é€šåœ°é¢ | å®å¿ƒéšœç¢ |
| ğŸŸ¢ ç»¿è‰² | åœ°é¢é¡¶éƒ¨ | å¯ç«™ç«‹è¡¨é¢ |
| âš« ç°è‰² | é‡‘å±å¹³å° | å¹³å°åœ°å½¢ |
| ğŸŸ  æ©™è‰² | ç‰¹æ®Šå¹³å° | å¯é€šè¿‡å¹³å° |
| ğŸ”´ çº¢è‰² | å°–åˆº/é™·é˜± | å³æ­»å±é™© |
| ğŸŸ¡ é‡‘è‰² | æ”¶é›†å“ | å¯æ‹¾å–ç‰©å“ |
| ğŸ”µ é’è‰² | æ¶²ä½“ | æ°´/å…¶ä»–æ¶²ä½“ |
| ğŸŸ£ ç´«è‰² | éšœç¢ç‰© | å¯ç ´åç‰©ä½“ |

### å®ä½“æ ‡è®°
- ğŸ”´â­• + "E" = æ•Œäºº
- ğŸŸ£â—¼ï¸ = éšœç¢ç‰©
- ğŸŸ¡â­• = æ”¶é›†å“

## ğŸ› ï¸ å·¥å…·è¯´æ˜

### map_generator.py
ä¸»è¦çš„åœ°å›¾ç”Ÿæˆå™¨è„šæœ¬

**æ ¸å¿ƒç±»: MapGenerator**
- `load_stage(stage_file)` - åŠ è½½stage.binæ–‡ä»¶
- `render_chunk(chunk_index)` - æ¸²æŸ“å•ä¸ªåœ°å½¢å—
- `generate_level_map(level_index)` - ç”Ÿæˆå®Œæ•´å…³å¡
- `generate_all_chunks()` - æ‰¹é‡ç”Ÿæˆæ‰€æœ‰å—
- `generate_tile_legend()` - ç”Ÿæˆå›¾ä¾‹

### analyze_stage_bin.py
è°ƒè¯•å·¥å…·ï¼Œåˆ†æbinæ–‡ä»¶çš„å†…éƒ¨ç»“æ„

```bash
python analyze_stage_bin.py
```

è¾“å‡º:
- æ–‡ä»¶å¤§å°å’Œç»“æ„ä¿¡æ¯
- å—çš„æ•°é‡å’Œå°ºå¯¸
- æ•Œäºº/éšœç¢ç‰©/æ”¶é›†å“ç»Ÿè®¡
- åå…­è¿›åˆ¶æ•°æ®é¢„è§ˆ

## ğŸ“– æŠ€æœ¯æ–‡æ¡£

### è¯¦ç»†æŠ¥å‘Š
æŸ¥çœ‹ [MAP_GENERATION_REPORT.md](MAP_GENERATION_REPORT.md) äº†è§£ï¼š
- å®Œæ•´çš„æŠ€æœ¯å®ç°ç»†èŠ‚
- æ–‡ä»¶æ ¼å¼è§„èŒƒ
- Javaåˆ°Pythonçš„ä»£ç å¯¹åº”
- è®¾è®¡æ€è·¯åˆ†æ

### æ¸¸æˆæœºåˆ¶
æŸ¥çœ‹ [CORE_GAMEPLAY.md](CORE_GAMEPLAY.md) äº†è§£ï¼š
- æ¸¸æˆç©æ³•
- è§’è‰²ç³»ç»Ÿ
- å…³å¡è®¾è®¡
- ç‰©ç†æœºåˆ¶

## ğŸ¯ å…³å¡æ˜ å°„

| Stageæ–‡ä»¶ | å…³å¡ | ç‰¹ç‚¹ |
|-----------|------|------|
| stage0.bin | 0-2 | å…¥é—¨å…³å¡ï¼Œç®€å•å¹³å° |
| stage1.bin | 3-5 | å¢åŠ éš¾åº¦ï¼Œæ›´å¤šæ•Œäºº |
| stage2.bin | 6-8 | å¤æ‚åœ°å½¢ï¼Œè·³è·ƒæŒ‘æˆ˜ |
| stage3.bin | 9-11 | å›°éš¾æ¨¡å¼ï¼Œå¯†é›†éšœç¢ |
| stage4.bin | 12-15 | ç»ˆææŒ‘æˆ˜ |

## ğŸ” ä»£ç ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨
```python
from map_generator import MapGenerator

# åˆ›å»ºç”Ÿæˆå™¨
gen = MapGenerator('resources')

# åŠ è½½stage
gen.load_stage('stage0.bin')

# ç”Ÿæˆå•ä¸ªå—
chunk_img = gen.render_chunk(0)
chunk_img.save('chunk_0.png')

# ç”Ÿæˆå®Œæ•´å…³å¡
level_img = gen.generate_level_map(0, tile_size=8, output_dir='output')
```

### è‡ªå®šä¹‰é¢œè‰²
```python
# ä¿®æ”¹é¢œè‰²æ˜ å°„
gen.TILE_COLORS[1] = (255, 0, 0)  # å°†tileç±»å‹1æ”¹ä¸ºçº¢è‰²

# é‡æ–°æ¸²æŸ“
gen.render_chunk(0)
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜: æ‰¾ä¸åˆ°èµ„æºæ–‡ä»¶
```
è§£å†³: ç¡®ä¿resourcesç›®å½•å­˜åœ¨ï¼ŒåŒ…å«stage0-4.binæ–‡ä»¶
```

### é—®é¢˜: PIL/Pillowå®‰è£…å¤±è´¥
```bash
# Windows
pip install --upgrade pillow

# æˆ–ä½¿ç”¨conda
conda install pillow
```

### é—®é¢˜: å›¾ç‰‡æ˜¾ç¤ºé”™è¯¯
```
è§£å†³: æ£€æŸ¥map_outputç›®å½•æƒé™ï¼Œç¡®ä¿å¯å†™
```

## ğŸ“ å¼€å‘ç¬”è®°

### å…³é”®å‘ç°
1. **åˆ†ç¦»å¼æ•°æ®ç»“æ„**: å…ˆè¯»å–æ‰€æœ‰æ•°é‡ï¼Œå†è¯»å–æ‰€æœ‰æ•°æ®
2. **å¤§ç«¯åº**: Javaä½¿ç”¨big-endianï¼Œéœ€è¦`'>i'`æ ¼å¼
3. **å—é‡ç”¨**: åŒä¸€å—å¯åœ¨å¤šä¸ªä½ç½®ä½¿ç”¨
4. **å†…å­˜ä¼˜åŒ–**: ä»…åŠ è½½å¯è§åŒºåŸŸï¼Œé€‚åˆç§»åŠ¨è®¾å¤‡

### Javaä»£ç å‚è€ƒ
```java
// c.java - åŠ è½½åœ°å½¢æ•°æ®
DataInputStream dataInputStream = l.a(str);
int num_chunks = dataInputStream.readInt();
int chunk_width = dataInputStream.readInt();
int chunk_height = dataInputStream.readInt();

// è¯»å–åœ°å½¢å—
for (int i = 0; i < num_chunks; i++) {
    for (int y = 0; y < chunk_height; y++) {
        for (int x = 0; x < chunk_width; x++) {
            byte tile = dataInputStream.readByte();
            f86a[i][x][y] = tile;
        }
    }
}
```

## ğŸ‰ æˆæœå±•ç¤º

è¿è¡Œ`map_generator.py`åä¼šç”Ÿæˆï¼š
- âœ… 30ä¸ªåœ°å½¢å—PNGå›¾ç‰‡
- âœ… 15ä¸ªå®Œæ•´å…³å¡åœ°å›¾
- âœ… 5ä¸ªtileç±»å‹å›¾ä¾‹
- âœ… 1ä¸ªäº¤äº’å¼HTMLæŸ¥çœ‹å™¨

æ€»è¾“å‡ºå¤§å°: çº¦5MB
ç”Ÿæˆæ—¶é—´: çº¦2ç§’

## ğŸ“š å‚è€ƒèµ„æ–™

- Javaæºç : `sources/defpackage/c.java`
- å—åºåˆ—: `c.java` Line 183-188
- åœ°å½¢åˆ¤å®š: `c.java` Line 558-608
- è§†å·®æ»šåŠ¨: `c.java` Line 1174-1200

## ğŸ‘¥ è´¡çŒ®

è¿™æ˜¯ä¸€ä¸ªé€†å‘å·¥ç¨‹å­¦ä¹ é¡¹ç›®ã€‚æ¬¢è¿ï¼š
- æŠ¥å‘Šbug
- æå‡ºæ”¹è¿›å»ºè®®
- æ·»åŠ æ–°åŠŸèƒ½
- å®Œå–„æ–‡æ¡£

## âš–ï¸ è®¸å¯è¯´æ˜

æœ¬é¡¹ç›®ä»…ç”¨äºæŠ€æœ¯å­¦ä¹ å’Œç ”ç©¶ï¼Œæ— å•†ä¸šç”¨é€”ã€‚
åŸæ¸¸æˆç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡GitHub Issuesè”ç³»ã€‚

---

**æœ€åæ›´æ–°**: 2025å¹´12æœˆ25æ—¥
**ç‰ˆæœ¬**: 1.0.0
**çŠ¶æ€**: âœ… å®Œå…¨å¯ç”¨
