# Runner626 - 核心玩法设计文档

## 1. 游戏概览 (Game Overview)

*   **游戏类型**: 2D 侧视卷轴竞速跑酷 (Side-scrolling Competitive Runner / Racing Platformer)
*   **核心体验**: 这是一个 **1v1 的双人竞速游戏**。玩家不仅要面对地形的挑战，还要与一名 AI 控制的对手（Rival）进行实时赛跑。核心目标是比对手先到达终点。
*   **视觉风格**: 暂时没有美术资源，用几何图形代替，背景采用多层视差滚动。

## 2. 核心机制 (Core Mechanics)

### 2.1 移动与物理
*   **自动/强制卷轴**: 游戏场景持续向左移动。玩家和 AI 对手都在向右奔跑。
*   **跳跃 (Jump)**:
    *   核心操作。支持定高跳跃（长按可以跳的更高，但是有上限），部分形态可能支持二段跳或飞行（如 Rocket 形态）。
    *   物理模拟采用定点数逻辑，重力加速度固定。
*   **下蹲/滑铲 (Crouch/Slide)**:
    *   用于躲避高处的障碍物或飞行的敌人。
    *   改变角色的碰撞箱高度。

### 2.2 战斗系统
*   **碰撞伤害**:
    *   可以拾取地图道具（如陷阱），点击并放置在人物当前位置。
    *   接触陷阱（如地刺）通常会造成大量伤害或直接死亡。

### 2.3 状态机 (State Machine)
角色行为由一个严格的整数状态机控制：
*   `State 0`: 奔跑 (Run) - 默认状态。
*   `State 18`: 跳跃 (Jump) - 空中状态。
*   `State 21/22`: 攻击 (Attack) - 射击或近战。
*   `State 23`: 受击 (Hit) - 短暂无敌时间与闪烁。
*   `State 27`: 死亡 (Death) - 播放死亡动画，游戏结束。

### 2.4 竞速机制 (Racing Mechanics)
*   **AI 对手 (The Rival)**:
    *   每场比赛都有一个由电脑控制的对手。
    *   AI 拥有独立的决策逻辑（跳跃、攻击、躲避），会根据地形自动做出反应。
    *   AI 与玩家共享同一个物理世界，同样会受到障碍物和敌人的影响。
*   **胜负条件**:
    *   **胜利**: 玩家先于 AI 到达关卡终点。
    *   **失败**: 玩家 HP 归零，或者 AI 先到达终点。


## 3. 角色系统 ("Techs")

游戏的核心特色在于多套机甲/形态切换，代码中称为 "Techs"。

### 3.1 可玩角色/形态
存在以下主要形态：
1.  **Zack**: 基础形态，各项能力平衡。
2.  **Sigma**: 强化形态，可能侧重于攻击范围或防御。
3.  **Rocket**: 速度型/飞行型，拥有更高的跳跃力或滞空能力。
4.  **Tagma**: 重装型，可能移动较慢但血量高。
5.  **Balrog**: 力量型，近战伤害高。

### 3.2 属性参数
每个角色拥有不同的基础属性配置（定义在静态数组中）：
*   **速度 (Speed)**: 决定奔跑和卷轴推进的节奏。
*   **跳跃力 (Jump Power)**: 决定能跳过的障碍高度。
*   **生命值 (HP)**: 可承受的伤害次数。
*   **攻击力 (Damage)**: 消灭敌人所需的攻击次数。

## 4. 关卡设计 (Level Design)

### 4.1 生成逻辑
*   **基于块 (Chunk-based)**: 关卡不是完全随机生成的，而是由预先设计好的“地形块”拼接而成。

### 4.2 实体类型
*   **敌人 (Enemies)**:
    *   **巡逻型**: 在平台上左右移动。
    *   **飞行型**: 在空中波浪式移动或直线冲锋。
    *   **射击型**: 远程攻击玩家。
*   **障碍物 (Obstacles)**:
    *   **静态**: 坑洞（即死）、地刺、高墙。
    *   **动态**: 移动平台、破碎地板。
*   **收集品 (Pickups)**:
    *   分数道具。
    *   回复道具（血包）。
    *   能量/弹药补充。

## 5. 游戏循环 (Game Loop)

1.  **主菜单**: 选择开始游戏、设置或查看帮助。
2.  **角色选择**: 选择出战的 Tech 形态。
3.  **关卡流程**:
    *   **Start**: 玩家与 AI 对手同时入场，倒计时开始。
    *   **Loop**: 奔跑 -> 躲避/战斗 -> 收集 -> 推进距离 -> 尝试超越对手。
    *   **Event**: 遭遇 Boss 或特殊脚本事件。
    *   **End**: 
        *   **Win**: 玩家触碰终点线。
        *   **Lose**: 玩家死亡或 AI 触碰终点线。
4.  **结算**: 显示胜负结果、用时、分数。
